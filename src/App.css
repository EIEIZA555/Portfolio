/* ‚ú® IMPROVED AURORA BACKGROUND ‚ú® */

body::before,
body::after {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -2;
  pointer-events: none;
  transform: translate3d(0, 0, 0);
  transition: opacity 400ms ease;
}

/* Layer 1 ‚Äì large, soft drifting glow */
body::before {
  background: radial-gradient(60% 70% at 20% 30%, var(--aurora-1), transparent 70%),
              radial-gradient(50% 60% at 80% 70%, var(--aurora-2), transparent 70%);
  filter: blur(100px) saturate(120%);
  opacity: 0.8;
  animation: auroraFloatA 30s ease-in-out infinite alternate;
  mix-blend-mode: screen;
}

/* Layer 2 ‚Äì ribbon-like motion with dynamic hues */
body::after {
  background: conic-gradient(from 0deg at 50% 50%,
              var(--aurora-3) 0deg,
              transparent 100deg,
              var(--aurora-1) 180deg,
              transparent 270deg);
  filter: blur(120px) saturate(160%);
  opacity: 0.75;
  animation: auroraFloatB 40s ease-in-out infinite alternate;
  mix-blend-mode: screen;
}

/* Extra faint ‚Äúlight mist‚Äù layer for depth */
html::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  background: radial-gradient(80% 80% at 50% 50%, rgba(255,255,255,0.05), transparent 70%);
  mix-blend-mode: overlay;
  animation: auroraMist 60s ease-in-out infinite alternate;
}

/* Stars layer stays */
html::after {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -3;
  pointer-events: none;
  background-image:
    radial-gradient(var(--stars-color) 1px, transparent 1px),
    radial-gradient(var(--stars-color) 1px, transparent 1px);
  background-size: 180px 180px, 100px 100px;
  background-position: 0 0, 60px 80px;
  opacity: 0.5;
  filter: blur(0.5px);
  mix-blend-mode: screen;
}

/* üåà Keyframes ‚Äì smooth multi-directional drift */
@keyframes auroraFloatA {
  0%   { transform: translate3d(0, 0, 0) scale(1); }
  25%  { transform: translate3d(-4vw, -2vh, 0) scale(1.03); }
  50%  { transform: translate3d(3vw, 4vh, 0) scale(1.04); }
  75%  { transform: translate3d(-2vw, 3vh, 0) scale(1.02); }
  100% { transform: translate3d(0, 0, 0) scale(1); }
}

@keyframes auroraFloatB {
  0%   { transform: translate3d(0,0,0) rotate(0deg) scale(1); filter: hue-rotate(0deg); }
  50%  { transform: translate3d(4vw, -3vh, 0) rotate(8deg) scale(1.05); filter: hue-rotate(30deg); }
  100% { transform: translate3d(-4vw, 2vh, 0) rotate(-6deg) scale(1); filter: hue-rotate(-30deg); }
}

@keyframes auroraMist {
  0%   { opacity: 0.4; transform: scale(1); }
  50%  { opacity: 0.6; transform: scale(1.03); }
  100% { opacity: 0.4; transform: scale(1); }
}

/* üé® Theme handling */
html:not([data-theme='dark']) body::before,
html:not([data-theme='dark']) body::after {
  mix-blend-mode: multiply;
  opacity: 0.6;
  filter: blur(80px) saturate(110%);
}

[data-theme='dark'] body::before,
[data-theme='dark'] body::after {
  mix-blend-mode: screen;
  opacity: 0.9;
  filter: blur(120px) saturate(160%);
}

/* Motion preference */
@media (prefers-reduced-motion: reduce) {
  body::before,
  body::after,
  html::before {
    animation: none !important;
  }
}
